<!-- app/templates/company_detail.html -->
{% extends "base.html" %}
{% block content %}
<h2>Unternehmen #{{ company.id }}</h2>
<ul>
  <li><strong>Name:</strong> {{ company.name }}</li>
  <li><strong>USt-ID:</strong> {{ company.vat_number }}</li>
  <li><strong>Land:</strong> {{ company.country }}</li>
  <li><strong>Adresse:</strong> {{ company.address }}</li>
  <li><strong>Website:</strong> {{ company.website }}</li>
  <li><strong>Anfragender (Name):</strong> {{ company.requester_name or '—' }}</li>
  <li><strong>Anfragender (E‑Mail):</strong> {{ company.requester_email or '—' }}</li>
  <li><strong>Anfragender (Organisation):</strong> {{ company.requester_org or '—' }}</li>
  <li><strong>Status:</strong> 
    <span class="status-{{ check.status }}">{{ check.status }}</span>
  </li>
  <li><strong>Konfidenz-Score:</strong> {{ company.confidence_score }}/100</li>
  <li><strong>Letzte Überprüfung:</strong> {{ company.last_checked or '—' }}</li>
</ul>

<h3>Überprüfungsergebnisse</h3>
<ul>
{% for result in check.results %}
<li>
  <strong>{{ result.adapter_name }}:</strong> <span class="status-{{ result.status }}">{{ result.status }}</span>
  {% if result.details and result.details.used_query %}
    <div class="used-query">
      <em>Verwendete Felder:</em>
      <ul>
      {% for k, v in result.details.used_query.items() %}
        <li><code>{{ k }}</code>: {{ v or '—' }}</li>
      {% endfor %}
      </ul>
    </div>
  {% endif %}
</li>
{% endfor %}
</ul>
{% endblock %}